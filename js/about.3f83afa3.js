(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"27fd":function(t,e,a){"use strict";a("662c")},"3ab1":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.notAuthorized?a("div",[a("h4",[t._v("Sorry, for joining to chat rooms you have to be authorized!")])]):a("div",[t.emptyName?a("div",[a("h4",[t._v("Name of room shouldn't be empty!")])]):t._e(),t.existingRoom?a("div",[a("h4",[t._v("Room with this name already exists, please try again!")])]):t._e(),t.isUpdating?a("div",[a("nav",{staticClass:"navbar navbar-light",staticStyle:{"background-color":"#42b983"}},[a("span",{staticStyle:{"padding-left":"5%"}},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.onLeave}},[t._v("Leave")])]),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newName,expression:"newName"}],attrs:{type:"text"},domProps:{value:t.newName},on:{input:function(e){e.target.composing||(t.newName=e.target.value)}}})]),a("span",[a("button",{staticClass:"btn btn-outline-light",attrs:{type:"button"},on:{click:t.onUpdate}},[t._v("Confirm")])]),a("span",[a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:t.onDelete}},[t._v("Delete")])]),a("br"),a("br")])]):a("div",[t.isOwner?a("div",[a("nav",{staticClass:"navbar navbar-light",staticStyle:{"background-color":"#42b983"}},[a("span",{staticStyle:{"padding-left":"5%"}},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.onLeave}},[t._v("Leave")])]),a("span",{staticStyle:{color:"white"}},[t._v(" "+t._s(t.roomName)+" ")]),a("span",[a("button",{staticClass:"btn btn-outline-light",attrs:{type:"button"},on:{click:t.onUpdating}},[t._v("Update")])]),a("span",[a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:t.onDelete}},[t._v("Delete")])]),a("br"),a("br")])]):a("div",[a("nav",{staticClass:"navbar navbar-light",staticStyle:{"background-color":"#42b983"}},[a("span",{staticStyle:{"padding-left":"5%"}},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.onLeave}},[t._v("Leave")])]),a("span",{staticStyle:{color:"white"}},[t._v(" "+t._s(t.roomName)+" ")]),a("br"),a("br")])])]),a("table",{staticStyle:{width:"90%","margin-left":"5%"}},[a("tr",[a("td",{staticStyle:{"vertical-align":"top",border:"1px solid black",width:"80%",overflow:"hidden"}},[t._m(0),a("table",{staticStyle:{width:"97%","margin-left":"1%"},attrs:{cellspacing:"0"}},t._l(t.messages,(function(e){return a("div",{key:e.id,staticStyle:{"margin-bottom":"5px"}},[-1===e.author.id?a("div",{staticClass:"row"},[t._v(" "+t._s(e.text)+" ")]):e.author.username===t.user.data.me.username?a("div",[a("div",{staticStyle:{"background-color":"#58f3ad"}},[a("div",{staticClass:"row"},[a("p",{staticStyle:{"text-align":"left","font-weight":"bold"}},[t._v(t._s(e.author.username)+":")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"text-align":"left"}},[t._v(t._s(e.text))]),a("div",{staticClass:"col-2"},[t._v(t._s(e.timestamp))])])])]):a("div",[a("div",{staticClass:"row"},[a("p",{staticStyle:{"text-align":"left","font-weight":"bold"}},[t._v(t._s(e.author.username)+":")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"text-align":"left"}},[t._v(t._s(e.text))]),a("div",{staticClass:"col-2"},[t._v(t._s(e.timestamp))])])])])})),0)]),a("td",{staticStyle:{"vertical-align":"top",border:"1px solid black",width:"40%"}},[a("ul",{staticClass:"list-group list-group-flush"},[a("li",{staticClass:"list-group-item list-group-item-primary"},[t._v("Owner: "+t._s(t.owner.username))]),a("li",{staticClass:"list-group-item list-group-item-secondary"},[t._v("Active users: ")]),t._l(t.members,(function(e){return a("div",{key:e.id},[e.id===t.user.data.me.id?a("li",{staticClass:"list-group-item list-group-item-success"},[t._v(t._s(e.username)+"(you)")]):a("li",{staticClass:"list-group-item"},[t._v(t._s(e.username))])])}))],2)])])]),a("br"),a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-auto"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newMessage,expression:"newMessage"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter a message..."},domProps:{value:t.newMessage},on:{input:function(e){e.target.composing||(t.newMessage=e.target.value)}}})]),a("div",{staticClass:"col-auto"},[a("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:t.onSend}},[t._v("Send")])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h5",{staticStyle:{color:"grey"}},[t._v("Messages")])])}],o=a("1da1"),s=(a("96cf"),a("b0c0"),a("a434"),a("498a"),a("39ff")),i={name:"Room",apollo:{$subscribe:{roomDeleted:{query:s["a"].ON_DELETE_ROOM,result:function(t){var e=this,a=t.data;if(this.$data.id==={data:a}.data.roomDeleted.id){this.$data.user.data.me.currentRoom=null;var r={id:this.$data.specialMessageNewId++,text:"This chat was deleted, so you will be automaticly redirected to 'Chat Rooms' page after 5 sec.",author:{id:-1}};console.log("Notification: ",r),this.$data.messages.push(r),setTimeout((function(){e.$router.push({name:"Chat_Rooms"}).catch((function(){}))}),5e3)}}},roomUpdated:{query:s["a"].ON_UPDATE_ROOM,result:function(t){var e=t.data;console.log("Updated: ",{data:e}.data.roomUpdated);var a={data:e}.data.roomUpdated.name;this.$data.roomName=a,this.$data.newName=a}},userJoined:{query:s["a"].ON_USER_JOIN,result:function(t){var e=t.data,a={data:e}.data.memberJoined;console.log("Joined: ",a),this.$data.members.push(a);var r={id:this.$data.specialMessageNewId++,text:"".concat(a.username," joined to the chat"),author:{id:-1}};console.log("Notification: ",r),this.$data.messages.push(r)}},userLeave:{query:s["a"].ON_USER_LEAVE,result:function(t){var e=t.data,a={data:e}.data.memberLeft;for(var r in console.log("Leaved: ",a),this.$data.members)if(this.$data.members[r].id===a.id){this.$data.members.splice(r,1);break}var n={id:this.$data.specialMessageNewId++,text:"".concat(a.username," has left the chat"),author:{id:-1}};console.log("Notification: ",n),this.$data.messages.push(n)}},messageCreated:{query:s["a"].ON_CREATE_MESSAGE,result:function(t){var e=t.data;console.log("New message: ",{data:e}.data.messageCreated),this.$data.messages.push({data:e}.data.messageCreated)}}}},data:function(){return{messages:[],user:{},owner:{},members:[],id:"",roomName:"",newName:"",newMessage:"",specialMessageNewId:0,notAuthorized:!1,emptyName:!1,existingRoom:!1,isUpdating:!1,isOwner:!1}},created:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("Room Created..."),t.next=4,this.$apollo.query({query:s["a"].USER,fetchPolicy:"no-cache"});case 4:if(this.$data.user=t.sent,console.log(this.$data.user),null===this.$data.user.data){t.next=19;break}return t.next=9,this.$apollo.query({query:s["a"].GET_MESSAGES,fetchPolicy:"no-cache"});case 9:e=t.sent,this.$data.id=e.data.me.currentRoom.id,this.$data.messages=e.data.me.currentRoom.lastMessages,this.$data.members=e.data.me.currentRoom.members,this.$data.owner=e.data.me.currentRoom.owner,this.$data.owner.id===this.$data.user.data.me.id&&(this.$data.isOwner=!0),this.$data.roomName=e.data.me.currentRoom.name,this.$data.newName=e.data.me.currentRoom.name,t.next=20;break;case 19:this.$data.notAuthorized=!0;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](0),this.$data.notAuthorized=!0;case 25:case"end":return t.stop()}}),t,this,[[0,22]])})));function e(){return t.apply(this,arguments)}return e}(),methods:{onUpdate:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$data.isUpdating=!1,t.$data.emptyName=!1,t.$data.existingRoom=!1,t.$data.newName=t.$data.newName.trim(),a=t.$data.newName,0!==a.length){e.next=9;break}return t.$data.newName=t.$data.roomName,t.$data.emptyName=!0,e.abrupt("return");case 9:return e.prev=9,e.next=12,t.$apollo.mutate({mutation:s["a"].UPDATE_ROOM,variables:{id:t.$data.id,name:a}});case 12:r=e.sent,console.log(r),t.$data.roomName=a,e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](9),t.$data.existingRoom=!0;case 20:case"end":return e.stop()}}),e,null,[[9,17]])})))()},onUpdating:function(){this.$data.isUpdating=!0},onDelete:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$apollo.mutate({mutation:s["a"].DELETE_ROOM,variables:{id:t.$data.id}});case 3:a=e.sent,t.$data.user.data.me.currentRoom=null,console.log(a),t.$router.push({name:"Chat_Rooms"}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error("Deleting went wrong: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},onLeave:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$apollo.mutate({mutation:s["a"].LEAVE_ROOM});case 3:t.$data.user.data.me.currentRoom=null,t.$router.push({name:"Chat_Rooms",params:{}}).catch((function(){console.log("Push failed")})),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log("Error happened: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},onSend:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.$data.newMessage.trim().length>0)){e.next=10;break}return e.prev=1,e.next=4,t.$apollo.mutate({mutation:s["a"].CREATE_MESSAGE,variables:{text:t.$data.newMessage}});case 4:t.$data.newMessage="",e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),console.log("Error happened: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))()}},beforeDestroy:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("BD: ",this.$data.user.data.me.currentRoom),null===this.$data.user.data.me.currentRoom){t.next=4;break}return t.next=4,this.$apollo.mutate({mutation:s["a"].LEAVE_ROOM});case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},c=i,u=(a("5ca1"),a("2877")),l=Object(u["a"])(c,r,n,!1,null,null,null);e["default"]=l.exports},"3fd1":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[t.isNotUnique?a("h5",[t._v("User with this login already exists! Please, try again.")]):t._e(),t.passIsNotValid?a("h5",[t._v("Password is too short! Please, try again.")]):t._e(),a("p",[t._v("Login:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],attrs:{type:"text"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}}),a("p",[t._v("Password:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),a("br"),a("br"),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.onClick}},[t._v("Register")])])},n=[],o=a("1da1"),s=(a("96cf"),a("498a"),a("39ff")),i=a("79e8"),c=a("ca94"),u={name:"Registration",data:function(){return{passIsNotValid:!1,isNotUnique:!1,login:"",password:""}},apollo:{},methods:{onClick:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$data.passIsNotValid=!1,t.$data.isNotUnique=!1,a=t.$data.password.trim(),t.$data.password="",!(a.length<8)){e.next=7;break}return t.$data.passIsNotValid=!0,e.abrupt("return");case 7:return a=Object(i["a"])(a),console.log(a),r=t.$data.login.trim(),e.next=12,t.$apollo.query({query:s["a"].USER_EXIST,variables:{username:r}});case 12:if(n=e.sent,!n.data.usernameExists){e.next=17;break}return t.$data.isNotUnique=!0,t.$data.login="",e.abrupt("return");case 17:return e.next=19,t.$apollo.query({query:s["a"].REGISTER_USER,variables:{username:r,password:a}});case 19:return e.prev=19,e.next=22,t.$apollo.query({query:s["a"].USER,fetchPolicy:"no-cache"});case 22:if(o=e.sent,null===o.data){e.next=26;break}return e.next=26,Object(c["c"])(t.$apollo.provider.defaultClient);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](19),console.error(e.t0);case 31:return e.next=33,t.$apollo.query({query:s["a"].LOGIN_USER,variables:{username:r,password:a}});case 33:return u=e.sent,e.next=36,Object(c["b"])(t.$apollo.provider.defaultClient,u.data.login);case 36:t.$router.push({name:"Chat_Rooms"});case 37:case"end":return e.stop()}}),e,null,[[19,28]])})))()}}},l=u,d=(a("27fd"),a("2877")),m=Object(d["a"])(l,r,n,!1,null,null,null);e["default"]=m.exports},"4df4":function(t,e,a){"use strict";var r=a("0366"),n=a("7b0b"),o=a("9bdd"),s=a("e95a"),i=a("50c4"),c=a("8418"),u=a("35a1");t.exports=function(t){var e,a,l,d,m,p,h=n(t),v="function"==typeof this?this:Array,f=arguments.length,g=f>1?arguments[1]:void 0,b=void 0!==g,y=u(h),w=0;if(b&&(g=r(g,f>2?arguments[2]:void 0,2)),void 0==y||v==Array&&s(y))for(e=i(h.length),a=new v(e);e>w;w++)p=b?g(h[w],w):h[w],c(a,w,p);else for(d=y.call(h),m=d.next,a=new v;!(l=m.call(d)).done;w++)p=b?o(d,g,[l.value,w],!0):l.value,c(a,w,p);return a.length=w,a}},"5ca1":function(t,e,a){"use strict";a("f255")},"662c":function(t,e,a){},"85de":function(t,e,a){},"9bdd":function(t,e,a){var r=a("825a"),n=a("2a62");t.exports=function(t,e,a,o){try{return o?e(r(a)[0],a[1]):e(a)}catch(s){throw n(t),s}}},a434:function(t,e,a){"use strict";var r=a("23e7"),n=a("23cb"),o=a("a691"),s=a("50c4"),i=a("7b0b"),c=a("65f0"),u=a("8418"),l=a("1dde"),d=l("splice"),m=Math.max,p=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var a,r,l,d,f,g,b=i(this),y=s(b.length),w=n(t,y),$=arguments.length;if(0===$?a=r=0:1===$?(a=0,r=y-w):(a=$-2,r=p(m(o(e),0),y-w)),y+a-r>h)throw TypeError(v);for(l=c(b,r),d=0;d<r;d++)f=w+d,f in b&&u(l,d,b[f]);if(l.length=r,a<r){for(d=w;d<y-r;d++)f=d+r,g=d+a,f in b?b[g]=b[f]:delete b[g];for(d=y;d>y-r+a;d--)delete b[d-1]}else if(a>r)for(d=y-r;d>w;d--)f=d+r-1,g=d+a-1,f in b?b[g]=b[f]:delete b[g];for(d=0;d<a;d++)b[d+w]=arguments[d+2];return b.length=y-r+a,l}})},a630:function(t,e,a){var r=a("23e7"),n=a("4df4"),o=a("1c7e"),s=!o((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:s},{from:n})},b0c0:function(t,e,a){var r=a("83ab"),n=a("9bf2").f,o=Function.prototype,s=o.toString,i=/^\s*function ([^ (]*)/,c="name";r&&!(c in o)&&n(o,c,{configurable:!0,get:function(){try{return s.call(this).match(i)[1]}catch(t){return""}}})},d28b:function(t,e,a){var r=a("746f");r("iterator")},e01a:function(t,e,a){"use strict";var r=a("23e7"),n=a("83ab"),o=a("da84"),s=a("5135"),i=a("861d"),c=a("9bf2").f,u=a("e893"),l=o.Symbol;if(n&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},m=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof m?new l(t):void 0===t?l():l(t);return""===t&&(d[e]=!0),e};u(m,l);var p=m.prototype=l.prototype;p.constructor=m;var h=p.toString,v="Symbol(test)"==String(l("test")),f=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var t=i(this)?this.valueOf():this,e=h.call(t);if(s(d,t))return"";var a=v?e.slice(7,-1):e.replace(f,"$1");return""===a?void 0:a}}),r({global:!0,forced:!0},{Symbol:m})}},e228:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.notAuthorized?a("div",[a("h4",[t._v("Sorry, for joining to chat rooms you have to be authorized!")])]):a("div",[t.emptyName?a("div",[a("h4",[t._v("Name of room shouldn't be empty!")])]):t._e(),t.existingRoom?a("div",[a("h4",[t._v("Room with this name already exists, please try again!")])]):t._e(),a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-auto"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.roomName,expression:"roomName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter name of new room..."},domProps:{value:t.roomName},on:{input:function(e){e.target.composing||(t.roomName=e.target.value)}}})]),a("div",{staticClass:"col-auto"},[a("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:t.onCreate}},[t._v("Create")])])]),a("br"),a("br"),a("h3",[t._v("Chat rooms list:")]),a("ul",{staticClass:"list-group list-group-flush"},[t._l(t.roomsOfUser,(function(e){return a("li",{key:e.id,staticClass:"list-group-item list-group-item-success"},[a("p",{on:{click:function(a){return t.onJoin(e.id)}}},[t._v(t._s(e.name)+"(your room)")])])})),t._l(t.otherRooms,(function(e){return a("li",{key:e.id,staticClass:"list-group-item"},[a("p",{on:{click:function(a){return t.onJoin(e.id)}}},[t._v(t._s(e.name))])])}))],2)])])},n=[],o=a("1da1");a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("fb6a"),a("b0c0"),a("a630");function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function i(t,e){if(t){if("string"===typeof t)return s(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?s(t,e):void 0}}function c(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=i(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return s=t.done,t},e:function(t){c=!0,o=t},f:function(){try{s||null==a["return"]||a["return"]()}finally{if(c)throw o}}}}a("96cf"),a("a434"),a("4de4"),a("498a");var u=a("39ff"),l={name:"Chat_Rooms",apollo:{$subscribe:{roomCreated:{query:u["a"].ON_CREATE_ROOM,result:function(t){var e=t.data,a={data:e}.data.roomCreated;console.log("Added: ",a),this.$data.rooms.push(a)}},roomDeleted:{query:u["a"].ON_DELETE_ROOM,result:function(t){var e=t.data;for(var a in console.log("Removed: ",{data:e}.data.roomDeleted),this.$data.rooms)if(this.$data.rooms[a].id==={data:e}.data.roomDeleted.id){this.$data.rooms.splice(a,1);break}}},roomUpdated:{query:u["a"].ON_UPDATE_ROOM,result:function(t){var e=t.data;console.log("Updated: ",{data:e}.data.roomUpdated);var a,r=c(this.$data.rooms);try{for(r.s();!(a=r.n()).done;){var n=a.value;if(n.id==={data:e}.data.roomUpdated.id){n.name={data:e}.data.roomUpdated.name;break}}}catch(o){r.e(o)}finally{r.f()}}}}},data:function(){return{rooms:[],user:{},notAuthorized:!1,roomName:"",emptyName:!1,existingRoom:!1}},created:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.$data.notAuthorized=!1,console.log("Created...!"),t.next=5,this.$apollo.query({query:u["a"].USER,fetchPolicy:"no-cache"});case 5:if(this.$data.user=t.sent,console.log(this.$data.user),null===this.$data.user.data){t.next=14;break}return t.next=10,this.$apollo.query({query:u["a"].GET_ROOMS,fetchPolicy:"no-cache"});case 10:e=t.sent,this.$data.rooms=e.data.rooms,t.next=15;break;case 14:this.$data.notAuthorized=!0;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](0),this.$data.notAuthorized=!0;case 20:case"end":return t.stop()}}),t,this,[[0,17]])})));function e(){return t.apply(this,arguments)}return e}(),computed:{roomsOfUser:function(){var t=this;return this.$data.rooms.filter((function(e){return e.owner.id===t.$data.user.data.me.id}))},otherRooms:function(){var t=this;return this.$data.rooms.filter((function(e){return e.owner.id!==t.$data.user.data.me.id}))}},methods:{onCreate:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$data.emptyName=!1,t.$data.existingRoom=!1,a=t.$data.roomName,t.$data.roomName="",0!==a.trim().length){e.next=7;break}return t.$data.emptyName=!0,e.abrupt("return");case 7:return e.prev=7,e.next=10,t.$apollo.mutate({mutation:u["a"].CREATE_ROOM,variables:{name:a.trim()}});case 10:r=e.sent,console.log(r),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](7),t.$data.existingRoom=!0;case 17:case"end":return e.stop()}}),e,null,[[7,14]])})))()},onJoin:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,console.log("joining to room with ".concat(t," id")),console.log(e.$data.user),a.next=5,e.$apollo.query({query:u["a"].USER,fetchPolicy:"no-cache"});case 5:if(e.$data.user=a.sent,null===e.$data.user.data.me.currentRoom){a.next=9;break}return a.next=9,e.$apollo.mutate({mutation:u["a"].LEAVE_ROOM});case 9:return a.next=11,e.$apollo.mutate({mutation:u["a"].JOIN_ROOM,variables:{roomId:t}});case 11:r=a.sent,console.log("Join reuslt: ".concat(r)),e.$router.push({name:"Room",params:{id:t}}).catch((function(){console.log("Push failed")})),a.next=19;break;case 16:a.prev=16,a.t0=a["catch"](0),console.log("joining refused");case 19:case"end":return a.stop()}}),a,null,[[0,16]])})))()}}},d=l,m=(a("f36d"),a("2877")),p=Object(m["a"])(d,r,n,!1,null,null,null);e["default"]=p.exports},f255:function(t,e,a){},f36d:function(t,e,a){"use strict";a("85de")}}]);
//# sourceMappingURL=about.3f83afa3.js.map